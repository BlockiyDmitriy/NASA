@page "/asteroids/recent"

@using Fluxor;
@using Nasa.Client.Services.DataServices.AsteroidServices;
@using Nasa.Client.StateManagement.Asteroid.UseCases;

@inject IAsteroidService _asteroidService
@inject IState<RecentAsteroidState> _recentAsteroidState

<PageTitle>Asteroids</PageTitle>

<MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Primary" Edge="Edge.Start" OnClick="@ToggleDrawer" />

@if (_recentAsteroidState?.Value.RecentAsteroids is not null)
{
    <section class="section">
        <h1>Asteroids &#8595;</h1>
    </section>
    @foreach (var apodData in _recentAsteroidState.Value.RecentAsteroids)
    {
        <section class="section">
            <div class="container reveal">

                <h2>Name @apodData.Name</h2>
                <div class="text-container">
                    <div>
                        <div class="text-box">
                            <h3>EstimatedDiameterMin</h3>
                            <p>
                                @apodData.EstimatedDiameter.Meters.EstimatedDiameterMin
                            </p>
                        </div>
                        <div class="text-box">
                            <h3>EstimatedDiameterMax</h3>
                            <p>
                                @apodData.EstimatedDiameter.Meters.EstimatedDiameterMax
                            </p>
                        </div>
                    </div>
                    <div>
                        @foreach (var approachData in apodData.CloseApproachData)
                        {
                            <div class="text-box">
                                <h3>CloseApproachDate</h3>
                                <p>
                                    @approachData.CloseApproachDate
                                </p>
                            </div>
                            <div class="text-box">
                                <h3>CloseApproachDateFull</h3>
                                <p>
                                    @approachData.CloseApproachDateFull
                                </p>
                            </div>
                            <div class="text-box">
                                <h3>OrbitingBody</h3>
                                <p>
                                    @approachData.OrbitingBody
                                </p>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </section>
    }
}

<MudDrawer @bind-Open="@_open" Anchor="Anchor.End" Elevation="1" Variant="@DrawerVariant.Temporary">
    <MudDrawerHeader>
        <MudText Typo="Typo.h6">Filter</MudText>
    </MudDrawerHeader>
    <MudDrawerContainer>
        <MudText Typo="Typo.h6">Filter content</MudText>
    </MudDrawerContainer>
</MudDrawer>
